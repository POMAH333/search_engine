# «Реализация системы поиска по корпоративному порталу компании „AйТиБокс“»

Данный проект представляет собой поисковый движок для корпоративного портала компании. Движок развёртывается локально и обеспечивает осуществление заданных поисковых запросов по набору текстовых файлов.

---

## Основные возможности системы

Поисковый движок представляет из себя консольное приложение, запускаемое на любом сервере или компьютере и осуществляющее поиск среди набора документов. Настройка приложения производится через файлы формата JSON.

Поисковый движок работает по следующим принципам:

1. В конфигурационном файле config.json перед запуском приложения задаются названия файлов, по которым движок будет осуществлять поиск.
Также в файле задаются другие параметры работы приложения:
* Название приложения
* Верия конфигурационного файла (должна соответствовать версии приложения)
* Масимальное количество ответов на один запрос

2. Поисковый движок обходит все файлы и индексирует их так, чтобы потом по любому поисковому запросу находить наиболее релевантные документы.

3. Пользователь задаёт запросы через JSON-файл requests.json. Запрос — это набор слов, по которым нужно найти документы.
4. Запрос трансформируется в список слов.
5. В индексе ищутся те документы, в которых встречаются эти слова.
6. Результаты поиска ранжируются, сортируются и отдаются пользователю.
7. В конце программа формирует файл answers.json, в который записывает результаты поиска.

---

## Используемые технологии и средства разработки

* Среда использованная для разработки: Microsoft Visual Studio Code version 1.79.2

* Компилятор: MinGW version 15.2.0
* Система сборки: CMake version 4.1.1
* JSON библиотека: JSON for Modern C++ version 3.12.0
* Система тестирования Google GTest version 1.12.1
* Плагин VSCode для тестирования: Google Test Explorer

---

## Сборка и запуск

Для сборки системы необходимо клонировать проект из данного репозитория.

В корневую папку проекта необходимо локально установить библиотеку JSON for Modern C++ из репозитория https://github.com/nlohmann/json.

После этого можно осуществить сборку и компиляцию системы.
Скомпилированный файл располагается в папке search_engine\out\build\search_engine и называется search_engine.exe

Для работы программы необходимо в папку с ней поместить конфигурационные файлы: config.json и requests.json, после чего запустить файл search_engine.exe на выполнение без параметров.

В результате работы программы будет создан или обновлён файл answers.json.

JSON-файлы должны иметь следующий формат:
1. Файл конфигурации config.json:

{  
"config": {  
"name": "SkillboxSearchEngine",  
"version": "0.1",  
"max_responses": 5  
},  
"files": [  
"../resources/file001.txt",  
"../resources/file002.txt",  
"../resources/file003.txt",  
"../resources/file004.txt",  
…  
]  
}

* config — общая информация, без которой приложение не запускается. Если это
поле отсутствует, то при старте программа выведет в консоль ошибку config file is empty.
Если отсутствует сам файл config.json, то будет выведена ошибка config file is missing.

* name — поле с названием поискового движка.
* version — поле с номером версии поискового движка. Если поле version не совпадает с версией самого
приложения, то будет выдана ошибка config.json has incorrect file version.
* max_responses — поле, определяющее максимальное количество ответов на один запрос.
* files содержит пути к файлам, по которым необходимо осуществлять поиск.
Если по этому пути файл не существует, то на экран выводится соответствующая ошибка, но выполнение
программы не прекращается. При этом каждый документ должен содержать не
более 1000 слов с максимальной длиной каждого в 100 символов. Слова
состоят из строчных латинских букв и разделены одним или несколькими
пробелами.

2. Файл с запросами requests.json.

{  
"requests": [  
"some words..",  
"some words..",  
"some words..",  
"some words..",  
…  
]  
}  
* requests состоит из списка запросов, которые необходимо обработать
поисковым движком. Поле содержит не более 1000 запросов, каждый из
которых включает от одного до десяти слов.

3. Файл с ответами на запросы answers.json.

{  
"answers": {  
"request001": {  
"result": "true",  
"relevance": [  
{ "docid": 0, "rank": 0.989 },  
{ "docid": 1, "rank": 0.897 },  
{ "docid": 2, "rank": 0.750 }  
]  
},  
"request002": {  
"result": "true",  
"relevance": [  
{ "docid": 0, "rank": 0.769 }  
]  
},  
"request003": {  
"result": "false"  
}  
}  
}  
* answers — базовое поле в этом файле, которое содержит ответы на запросы.
* request001 … 003 — идентификатор запроса, по которому сформирован ответ.
Идентификатор запроса формируется автоматически по порядку, в котором
находятся запросы в поле requests файла requests.json.
* result – результат поиска запроса. Если он принимает значение true, значит по
данному запросу найден хотя бы один документ. Если результат имеет
значение false, значит ни одного документа не найдено. Тогда других полей в
ответе на этот запрос нет.
* relevance включается в файл answers.json, если на этот запрос удалось
найти более одного документа.
Далее идут соответствия рейтинга ответа и названия id документа, в котором
осуществлялся поиск:
* <Идентификатор документа>("docid") — идентификатор документа, в котором
найден ответ на запрос. Он формируется автоматически при индексации всех
документов исходя из порядка, в котором документы расположены в поле files в
файле config.json.
* <ранг ответа>(“rank”) — ранг или поисковый рейтинг. Это число показывает,
насколько документ подходит для заданного запроса. В ответе id документов
располагаются в порядке уменьшения поискового рейтинга.

Для запуска встроенных тестов необходимо запустить программу с патаметром: search_engine --gtest  
При работе в среде VSCode с установленным плагином Google Test Explorer тесты можно запускать посредством значка возле строки  
add_test(NAME all_tests COMMAND search_engine --gtest)  
файла CMakeLists.txt.